<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/ae-740-website/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/ae-740-website/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(3)) > a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(2) > ul > li:nth-child(3) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(2) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(2) > ul.nav-list { display: block; } </style> <script src="/ae-740-website/assets/js/vendor/lunr.min.js"></script> <script src="/ae-740-website/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Exercises | Online Learning for Control (Fall 2025)</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Exercises" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="AEROSP740 – Fall 2025" /> <meta property="og:description" content="AEROSP740 – Fall 2025" /> <link rel="canonical" href="http://localhost:4000/ae-740-website/labs/lab-02/exercises/" /> <meta property="og:url" content="http://localhost:4000/ae-740-website/labs/lab-02/exercises/" /> <meta property="og:site_name" content="Online Learning for Control (Fall 2025)" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Exercises" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"AEROSP740 – Fall 2025","headline":"Exercises","url":"http://localhost:4000/ae-740-website/labs/lab-02/exercises/"}</script> <!-- End Jekyll SEO tag --> <!-- MathJax v3 configuration and loader --> <script> window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] }, svg: { fontCache: 'global' } }; </script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"> </script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/ae-740-website/" class="site-title lh-tight"> Online Learning for Control (Fall 2025) </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/ae-740-website/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Lectures category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ae-740-website/lectures/" class="nav-list-link">Lectures</a><ul class="nav-list"></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Labs category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ae-740-website/labs/" class="nav-list-link">Labs</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Lab 1 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ae-740-website/labs/lab-01/" class="nav-list-link">Lab 1</a><ul class="nav-list"><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-01/install-ubuntu/" class="nav-list-link">Install Ubuntu 22.04</a> </li><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-01/shell-basics/" class="nav-list-link">Shell Basics</a> </li><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-01/git/" class="nav-list-link">Git</a> </li><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-01/python/" class="nav-list-link">Python</a> </li><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-01/exercises/" class="nav-list-link">Exercises</a> </li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Lab 2 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/ae-740-website/labs/lab-02/" class="nav-list-link">Lab 2</a><ul class="nav-list"><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-02/install-ros/" class="nav-list-link">Installing ROS</a> </li><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-02/intro-to-ros/" class="nav-list-link">Introduction to ROS</a> </li><li class="nav-list-item"> <a href="/ae-740-website/labs/lab-02/exercises/" class="nav-list-link">Exercises</a> </li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Online Learning for Control (Fall 2025)" aria-label="Search Online Learning for Control (Fall 2025)" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://tinyurl.com/740-25-syllabus" class="site-button" > Syllabus </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/ae-740-website/labs/">Labs</a></li> <li class="breadcrumb-nav-list-item"><a href="/ae-740-website/labs/lab-02/">Lab 2</a></li> <li class="breadcrumb-nav-list-item"><span>Exercises</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 class="no_toc text-delta fs-9" id="exercises"> <a href="#exercises" class="anchor-heading" aria-labelledby="exercises"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Exercises </h1> <ol id="markdown-toc"> <li><a href="#submission" id="markdown-toc-submission">Submission</a> <ol> <li><a href="#find-a-team" id="markdown-toc-find-a-team">Find a team</a></li> </ol> </li> <li><a href="#setup-workspace" id="markdown-toc-setup-workspace">Setup workspace</a> <ol> <li><a href="#create-the-ros2-workspace" id="markdown-toc-create-the-ros2-workspace">Create the ROS2 workspace</a></li> <li><a href="#getting-the-lab-code" id="markdown-toc-getting-the-lab-code">Getting the Lab code</a></li> <li><a href="#ensure-up-to-date-lab-code" id="markdown-toc-ensure-up-to-date-lab-code">Ensure up-to-date lab code</a></li> <li><a href="#building-the-code" id="markdown-toc-building-the-code">Building the code</a></li> <li><a href="#a-two-drone-scenario" id="markdown-toc-a-two-drone-scenario">A two-drone scenario</a> <ol> <li><a href="#the-static-scenario-and-rviz" id="markdown-toc-the-static-scenario-and-rviz">The static scenario and rViz</a></li> </ol> </li> </ol> </li> <li><a href="#problem-formulation" id="markdown-toc-problem-formulation">Problem formulation</a> <ol> <li><a href="#positions" id="markdown-toc-positions">Positions</a></li> <li><a href="#orientations" id="markdown-toc-orientations">Orientations</a></li> </ol> </li> <li><a href="#basic-ros-commands" id="markdown-toc-basic-ros-commands">Basic ROS commands</a> <ol> <li><a href="#-deliverable-1---nodes-topics-launch-files-10-pts" id="markdown-toc--deliverable-1---nodes-topics-launch-files-10-pts">📨 Deliverable 1 - Nodes, topics, launch files (10 pts)</a></li> </ol> </li> <li><a href="#lets-make-things-move-publishing-the-transforms-using-tf" id="markdown-toc-lets-make-things-move-publishing-the-transforms-using-tf">Let’s make things move! Publishing the transforms using tf</a> <ol> <li><a href="#-deliverable-2---publishing-transforms-30-pts" id="markdown-toc--deliverable-2---publishing-transforms-30-pts">📨 Deliverable 2 - Publishing transforms (30 pts)</a> <ol> <li><a href="#how-to-test" id="markdown-toc-how-to-test">How to test</a></li> <li><a href="#what-to-expect" id="markdown-toc-what-to-expect">What to expect</a></li> </ol> </li> <li><a href="#changing-the-rviz-fixed-reference-frame" id="markdown-toc-changing-the-rviz-fixed-reference-frame">Changing the rViz fixed reference frame.</a></li> <li><a href="#-deliverable-3---looking-up-a-transform-30-pts" id="markdown-toc--deliverable-3---looking-up-a-transform-30-pts">📨 Deliverable 3 - Looking up a transform (30 pts)</a> <ol> <li><a href="#what-to-expect-1" id="markdown-toc-what-to-expect-1">What to expect</a></li> </ol> </li> </ol> </li> <li><a href="#lets-do-some-math" id="markdown-toc-lets-do-some-math">Let’s do some math</a> <ol> <li><a href="#-deliverable-4---mathematical-derivations-25-pts" id="markdown-toc--deliverable-4---mathematical-derivations-25-pts">📨 Deliverable 4 - Mathematical derivations (25 pts)</a></li> <li><a href="#-deliverable-5---more-properties-of-quaternions-5-pts" id="markdown-toc--deliverable-5---more-properties-of-quaternions-5-pts">📨 Deliverable 5 - More properties of quaternions (5 pts)</a></li> <li><a href="#-optional-deliverable-6---intrinsic-vs-extrinsic-rotations-20-pts" id="markdown-toc--optional-deliverable-6---intrinsic-vs-extrinsic-rotations-20-pts">📨 [Optional] Deliverable 6 - Intrinsic vs Extrinsic rotations (20 pts)</a></li> </ol> </li> </ol> <h2 id="submission"> <a href="#submission" class="anchor-heading" aria-labelledby="submission"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Submission </h2> <p>To submit your solutions create a folder called <code class="language-plaintext highlighter-rouge">lab2</code> and push one or more file to your repository with your answers (it can be plain text, markdown, pdf or whatever other format is reasonably easy to read)</p> <ul> <li>for <strong>math-related</strong> deliverables, LaTeX is preferred but handwritten is accepted too</li> <li>for <strong>code-based</strong> deliverables, push the source code of the entire package</li> </ul> <p><strong>Deadline:</strong> To submit your solution, you will be creating a .zip file containing all of your solutions and upload it on Canvas under <strong>Assignment &gt; Lab 2: ROS2, \tf, and Homogeneous Transforms</strong> by <strong>Friday, September 12</strong>, 11:59 EST.</p> <h3 id="find-a-team"> <a href="#find-a-team" class="anchor-heading" aria-labelledby="find-a-team"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Find a team </h3> <p>Next lab will have a team section, you should start thinking about your team! Each team consists of 2-3 students.</p> <blockquote class="warning-title"> <p><strong>Find a team</strong></p> <p>Please find your team members, fill out this <a href="https://docs.google.com/spreadsheets/d/1L6SpZpxE3lMkcNBSLKq2Eh0qhum2I8OBu84jUNXOeSE/edit?usp=sharing">spreadsheet</a></p> </blockquote> <p>Please fill it before <strong>Friday, September 19th</strong>.</p> <h2 id="setup-workspace"> <a href="#setup-workspace" class="anchor-heading" aria-labelledby="setup-workspace"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setup workspace </h2> <h3 id="create-the-ros2-workspace"> <a href="#create-the-ros2-workspace" class="anchor-heading" aria-labelledby="create-the-ros2-workspace"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create the ROS2 workspace </h3> <p>To get started, we must create a ROS2 workspace for the AE740 class. Choose your favorite working directory, we will assume you are creating one in your home directory (i.e <code class="language-plaintext highlighter-rouge">~/</code>). In a terminal, run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> ~/ae740_ws/src
<span class="nv">$ </span><span class="nb">cd</span> ~/ae740_ws/
<span class="nv">$ </span>colcon build
Starting <span class="o">&gt;&gt;&gt;</span> two_drones_pkg
Finished <span class="o">&lt;&lt;&lt;</span> two_drones_pkg <span class="o">[</span>0.32s]

Summary: 1 package finished <span class="o">[</span>0.45s]
</code></pre></div></div> <h3 id="getting-the-lab-code"> <a href="#getting-the-lab-code" class="anchor-heading" aria-labelledby="getting-the-lab-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting the Lab code </h3> <p>Go the folder where you cloned the Labs codebase and run <code class="language-plaintext highlighter-rouge">git pull</code>. This command will update the folder with the latest code. Let’s suppose we have the codebase in <code class="language-plaintext highlighter-rouge">~/ae740_labs</code>. In <code class="language-plaintext highlighter-rouge">~/labs/lab2</code> you now have the <code class="language-plaintext highlighter-rouge">two_drones_pkg</code> folder, which is a ROS2 package. Copy this folder in your AE740 workspace and build the workspace as follows:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cp</span> <span class="nt">-r</span> ~/ae740_labs/lab2/two_drones_pkg ~/ae740_ws/src
</code></pre></div></div> <p>Assuming you have cloned the AE740 labs repository to <code class="language-plaintext highlighter-rouge">~/ae740_labs</code>, this will create a <strong>symlink</strong> between the files in the AE740 labs repository and files in the ROS2 workspace. You can edit the files in <code class="language-plaintext highlighter-rouge">~/ae740_ws/src/two_drones_pkg</code>, and the changes will be reflected in <code class="language-plaintext highlighter-rouge">~/ae740_labs/lab2/two_drones_pkg</code>.</p> <h3 id="ensure-up-to-date-lab-code"> <a href="#ensure-up-to-date-lab-code" class="anchor-heading" aria-labelledby="ensure-up-to-date-lab-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ensure up-to-date lab code </h3> <p>Go the folder where you cloned the Labs codebase and run <code class="language-plaintext highlighter-rouge">git pull</code>. This command will update the folder with the latest code. Let’s suppose we have the codebase in <code class="language-plaintext highlighter-rouge">~/ae740_labs</code>. In <code class="language-plaintext highlighter-rouge">~/ae740_labs/lab2</code> you now have the <code class="language-plaintext highlighter-rouge">two_drones_pkg</code> folder, which is a ROS2 package.</p> <h3 id="building-the-code"> <a href="#building-the-code" class="anchor-heading" aria-labelledby="building-the-code"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Building the code </h3> <p>Building the code is as easy as running:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build <span class="nt">--symlink-install</span>
</code></pre></div></div> <p>Now that you built the code you see that colcon added a bunch of new folders. In order to use our workspace, we need to make ROS2 aware of all the components by sourcing the corresponding environment. This is done by running the following in <strong>every single terminal</strong> where you intend to use the workspace:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source install</span>/setup.bash
</code></pre></div></div> <p>For the rest of the assignment, we assume that you are performing this operation whenever necessary.</p> <h3 id="a-two-drone-scenario"> <a href="#a-two-drone-scenario" class="anchor-heading" aria-labelledby="a-two-drone-scenario"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A two-drone scenario </h3> <p>In this part, we are going to work with 3D Rigid Transformations and with tf, a basic tool provided by ROS to keep track of multiple coordinate frames over time.</p> <h4 id="the-static-scenario-and-rviz"> <a href="#the-static-scenario-and-rviz" class="anchor-heading" aria-labelledby="the-static-scenario-and-rviz"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> The static scenario and rViz </h4> <p>To get started, let’s go back to the VNAV workspace and bring up the two-drones static scenario. In this environment, we have two aerial vehicles, AV1 [blue] and AV2 [red] that are not moving, but it serves as a good starting point! With the VNAV workspace sourced in a terminal, run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch two_drones_pkg two_drones.launch static:<span class="o">=</span>True
</code></pre></div></div> <p>You should see the following window, which shows the initial positions of the two AVs.</p> <p><img src="/ae-740-website/assets/img/lab2/rViz.png" alt="rViz" class="mx-auto d-block" /></p> <p>This window is <a href="https://docs.ros.org/en/humble/Tutorials/Intermediate/RViz/RViz-User-Guide/RViz-User-Guide.html">rViz</a>, the mighty ROS visualizer! Just like most processes in the ROS ecosystem, rViz is a ROS node. Like all other nodes, rViz can subscribe to ROS topics. However, its specialty is converting them into graphics on your screen to display the state of your robotic system.</p> <p>As a first experience with rViz, let us:</p> <ul> <li>Add the visualization of <code class="language-plaintext highlighter-rouge">\tf</code>. In the Displays panel, click Add, select the By display type Tab in the pop-up and finally select “TF” and confirm with Ok. You should see all the reference frames, with names and their axes represented in red (x), green (y) and blue (z).</li> <li>Save the configuration file. So that we don’t have to repeat the step above every time we launch it! Hit <kbd>CTRL</kbd> + <kbd>s</kbd> or select <em>File</em> &gt; <em>Save Config</em>.</li> </ul> <p>Other published topics can be added to the visualizer in a similar way.</p> <h2 id="problem-formulation"> <a href="#problem-formulation" class="anchor-heading" aria-labelledby="problem-formulation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Problem formulation </h2> <p>We consider the scenario illustrated in the picture below, where two aerial vehicles, AV1 [blue] and AV2 [red] are following different trajectories: a <strong>circle</strong> and an <strong>arc of parabola</strong>, respectively. In the scene, we have highlighted the following elements:</p> <ul> <li>The world frame $(x_w, y_w, z_w)$</li> <li>The AV1 body frame, centered in $O_1$ with axes $(x_1,y_1,z_1)$</li> <li>The origin of AV2, denoted with $O_2$</li> </ul> <p><img src="/ae-740-website/assets/img/lab2/two-drones-refs.png" alt="Two drones reference systems" class="mx-auto d-block img-size-60" /></p> <h4 id="positions"> <a href="#positions" class="anchor-heading" aria-labelledby="positions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Positions </h4> <p>In the world frame, AV1 and AV2’s origins are given by:</p> <ul> <li>$o_1^w = [\text{cos}(t), \text{sin}(t), 0]^T$, and</li> <li>$o_2^w = [\text{sin}(t), 0, \text{cos}(2t)]^T$,</li> </ul> <p>where $t$ denotes time.</p> <h4 id="orientations"> <a href="#orientations" class="anchor-heading" aria-labelledby="orientations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Orientations </h4> <p>We will make the following simplifying assumptions:</p> <ul> <li>AV1’s reference frame is such that $y_1$ stays tangent to AV1’s trajectory for all $t$ and $z_1$ is parallel to $z_w$ for all $t$ (i.e., equivalently, roll = pitch = 0, yaw = $t$)</li> <li>AV2’s reference frame moves with pure translation and we can assume that its axes are parallel to the world axes for all times $t$</li> </ul> <blockquote> <p><strong>Notes</strong></p> <ul> <li>Given the dynamics of a quadrotor, these motions are dynamically infeasible. However, for the purpose of this lab, we disregard this fact and focus on the study of rigid transformations</li> <li>To make the math of this problem more interesting, we chose the $y_1$ axis to point in the direction of motion of the drone. However, do not forget that the standard convention is that $x_1$ should point forward!</li> </ul> </blockquote> <p>In the sequel, we reproduce the above scenario in ROS and study the trajectory of AV2 relative to AV1’s coordinate frame.</p> <h2 id="basic-ros-commands"> <a href="#basic-ros-commands" class="anchor-heading" aria-labelledby="basic-ros-commands"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic ROS commands </h2> <h3 id="-deliverable-1---nodes-topics-launch-files-10-pts"> <a href="#-deliverable-1---nodes-topics-launch-files-10-pts" class="anchor-heading" aria-labelledby="-deliverable-1---nodes-topics-launch-files-10-pts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📨 Deliverable 1 - Nodes, topics, launch files (10 pts) </h3> <p>With the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command above, we have spawned several ROS 2 nodes at the same time. Using your knowledge of ROS 2, answer the following questions:</p> <ol> <li><strong>List the nodes running in the two-drone static scenario.</strong> <ul> <li class="hint">Hint: You can inspect the launch file or use <code class="language-plaintext highlighter-rouge">rqt_graph</code> to visualize the node graph. Ignore <code class="language-plaintext highlighter-rouge">/rosout</code> and <code class="language-plaintext highlighter-rouge">/rqt_gui_py_*</code> nodes/topics.</li> </ul> </li> <li><strong>How could you run the two-drone static scenario without using the <code class="language-plaintext highlighter-rouge">ros2 launch</code> command? List the commands you would have to execute, in separate terminals, to achieve the same result.</strong> <ul> <li class="hint">Hint: Use <code class="language-plaintext highlighter-rouge">ros2 run [...]</code> for each node. Try running the nodes manually before finalizing your answer!</li> </ul> </li> <li><strong>List the topics that each node publishes/subscribes to. Which nodes are responsible for publishing the <code class="language-plaintext highlighter-rouge">av1</code>, <code class="language-plaintext highlighter-rouge">av2</code>, and <code class="language-plaintext highlighter-rouge">frames</code>? Which topic causes rViz to plot the drone meshes?</strong> <ul> <li class="hint">Hint: In rViz, uncheck items in the left pane until the meshes disappear, then check which node is publishing the corresponding topic.</li> </ul> </li> <li><strong>What changes if we omit <code class="language-plaintext highlighter-rouge">static:=True</code>? Why?</strong> <ul> <li class="hint">Hint: Review the <code class="language-plaintext highlighter-rouge">if</code> and <code class="language-plaintext highlighter-rouge">unless</code> conditions in the launch file and explain their effect.</li> </ul> </li> </ol> <h2 id="lets-make-things-move-publishing-the-transforms-using-tf"> <a href="#lets-make-things-move-publishing-the-transforms-using-tf" class="anchor-heading" aria-labelledby="lets-make-things-move-publishing-the-transforms-using-tf"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Let’s make things move! Publishing the transforms using tf </h2> <p>After exploring the static scenario, it’s time to implement the motions described in the <a href="#problem-formulation">problem formulation</a> section and visualize them in rViz. With the editor of your choice, open <code class="language-plaintext highlighter-rouge">frames_publisher_node.py</code> in the <code class="language-plaintext highlighter-rouge">two_drones_pkg</code> folder of the package. In this file, we provide a basic structure of a ROS node.</p> <h3 id="-deliverable-2---publishing-transforms-30-pts"> <a href="#-deliverable-2---publishing-transforms-30-pts" class="anchor-heading" aria-labelledby="-deliverable-2---publishing-transforms-30-pts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📨 Deliverable 2 - Publishing transforms (30 pts) </h3> <p>In <code class="language-plaintext highlighter-rouge">frames_publisher_node.py</code>, follow the instructions in the comments and fill in the missing code. Your objective is to populate the provided <code class="language-plaintext highlighter-rouge">world_T_av1</code> and <code class="language-plaintext highlighter-rouge">world_T_av2</code> variables to match the motions described in the problem formulation. These objects are instances of the <code class="language-plaintext highlighter-rouge">geometry_msgs.msg.TransformStamped</code> class, which is ROS2 message type representing a homogeneous transformation matrix (at a specific instance in time).</p> <blockquote class="warning-title"> <p><strong>Keep in mind.</strong></p> <p>Ensure that the orientation of the AV1 frame is in accordance with the assumptions made in the problem formulation, as this is of crucial importance for the final result!</p> </blockquote> <h4 id="how-to-test"> <a href="#how-to-test" class="anchor-heading" aria-labelledby="how-to-test"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to test </h4> <p>Once you are ready to compile your code, run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>colcon build
</code></pre></div></div> <p>from the workspace folder <code class="language-plaintext highlighter-rouge">~/ae740_ws</code>.</p> <p>To try out your code, launch the two-drone scenario in non-static mode, i.e. run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ros2 launch two_drones_pkg two_drones.launch.yaml
</code></pre></div></div> <h4 id="what-to-expect"> <a href="#what-to-expect" class="anchor-heading" aria-labelledby="what-to-expect"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What to expect </h4> <p>You should finally see the drones moving! Check that the trajectories reflect those illustrated in the figure in the problem formulation.</p> <p><img src="http://localhost:4000/ae-740-website/assets/img/lab2/two_drones_rviz.gif" alt="Two drones example" class="mx-auto d-block" /></p> <h3 id="changing-the-rviz-fixed-reference-frame"> <a href="#changing-the-rviz-fixed-reference-frame" class="anchor-heading" aria-labelledby="changing-the-rviz-fixed-reference-frame"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Changing the rViz fixed reference frame. </h3> <p>As mentioned, we are interested in the motion of AV2 relative to AV1’s reference frame. In the Displays panel (left, by default), under the Global Options section, rViz offers the possibility to change the Fixed Frame to any frame published in tf. Try it out yourself and change “world” into “av1” by typing in the corresponding field. From this perspective, AV1 appears static, the world frame spins around its $z$ axis and AV2 seems to be following a closed-curve trajectory.</p> <h3 id="-deliverable-3---looking-up-a-transform-30-pts"> <a href="#-deliverable-3---looking-up-a-transform-30-pts" class="anchor-heading" aria-labelledby="-deliverable-3---looking-up-a-transform-30-pts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📨 Deliverable 3 - Looking up a transform (30 pts) </h3> <p>In <code class="language-plaintext highlighter-rouge">plots_publisher_node.py</code>, follow the instructions in the comments and fill in the missing code. Your objective is to populate the provided object, <code class="language-plaintext highlighter-rouge">transform</code>, with the relative transform between two given frames with names <code class="language-plaintext highlighter-rouge">ref_frame</code> and <code class="language-plaintext highlighter-rouge">dest_frame</code>, using ROS 2’s tf2 library.</p> <p>Compile your code and try it out as previously explained.</p> <h4 id="what-to-expect-1"> <a href="#what-to-expect-1" class="anchor-heading" aria-labelledby="what-to-expect-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What to expect </h4> <p>You should eventually see three trajectories, namely:</p> <ul> <li>AV1’s trajectory [blue, solid] in the world frame (circle on the x-y plane)</li> <li>AV2’s trajectory [red, solid] in the world frame (parabola on the z-x plane)</li> <li>The trajectory of AV2 in AV1’s frame [red, dashed]. You should now have a strong hunch that this curve is an ellipse on a “slanted” plane!</li> </ul> <p><strong>Note</strong>: if the results you are observing do not seem to make sense, try swapping <code class="language-plaintext highlighter-rouge">ref_frame</code> and <code class="language-plaintext highlighter-rouge">dest_frame</code> when interrogating tf.</p> <h2 id="lets-do-some-math"> <a href="#lets-do-some-math" class="anchor-heading" aria-labelledby="lets-do-some-math"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Let’s do some math </h2> <p>So far, we have used ROS and tf to get a visual understanding of the motion of AV2 relative to AV1’s body frame. In this section, you are asked to use your knowledge about homogeneous transformations and study the relative trajectory explicitly.</p> <p>The visualization we have built should provide you with great guidance while working out the following questions. Since this exercise is designed for you to familiarize with the math of 3D transformations, we require that you explicitly write down all the homogeneous transformation matrices used in the process and precisely outline the logic and algebraic steps taken.</p> <h3 id="-deliverable-4---mathematical-derivations-25-pts"> <a href="#-deliverable-4---mathematical-derivations-25-pts" class="anchor-heading" aria-labelledby="-deliverable-4---mathematical-derivations-25-pts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📨 Deliverable 4 - Mathematical derivations (25 pts) </h3> <ol> <li>In the <a href="#problem-formulation">problem formulation</a>, we mentioned that AV2’s trajectory is an arc of parabola in the $x$-$z$ plane of the world frame. Can you prove this statement? <ul> <li class="hint">Hint: $cos(2t)$ can be written as…</li> </ul> </li> <li>Compute $o_2^1(t)$, i.e., the position of AV2 relative to AV1’s body frame as a function of $t$. <ul> <li class="hint">Hint: write down the homogeneous transformations and compose them accordingly…</li> </ul> </li> <li>Show that $o_2^1(t)$ describes a planar curve and find the equation of its plane $\Pi$. <ul> <li class="hint">Hint: find a linear relation between $z_2^1$ and $y_2^1$</li> </ul> </li> <li>Rewrite the above trajectory explicitly using a 2D frame of reference $(x_p, y_p)$ on the plane found before. Try to ensure that the curve is centered at the origin of this 2D frame and that $x_p$, $y_p$ are axes of symmetry for the curve. <ul> <li class="hint">Hints:</li> </ul> <ol> <li class="hint"> i) center the new 2D frame in $p^1= (-1,-1/2,0)$, these coordinates are in AV1’s frame</li> <li class="hint"> ii) start with a 3D reference frame centered in p with axes $(x_p, y_p, z_p)$, compute $o_2^p(t)$</li> <li class="hint"> iii) make sure that the $z$ component vanishes after the change of coordinates</li> </ol> </li> <li>Using the expression of $o_2^p(t)$, prove that the trajectory of AV2 relative to AV1 is an ellipse and compute the lengths of its semi-axes. <ul> <li class="hint">Hint: what is the general form of the equation of an axis-aligned ellipse centered in the origin?</li> </ul> </li> </ol> <h3 id="-deliverable-5---more-properties-of-quaternions-5-pts"> <a href="#-deliverable-5---more-properties-of-quaternions-5-pts" class="anchor-heading" aria-labelledby="-deliverable-5---more-properties-of-quaternions-5-pts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📨 Deliverable 5 - More properties of quaternions (5 pts) </h3> <p>In the lecture notes, we have defined two linear maps $\Omega_1: \mathbb{R}^4 \rightarrow \mathbb{R}^{4\times 4}$, and $\Omega_2: \mathbb{R}^4 \rightarrow \mathbb{R}^{4\times 4}$, such that for any $q \in \mathbb{R}^4$, we have:</p> \[\Omega_1(q) = \begin{bmatrix} q_4 &amp; -q_3 &amp; q_2 &amp; q_1 \\ q_3 &amp; q_4 &amp; -q_1 &amp; q_2 \\ -q_2 &amp; q_1 &amp; q_4 &amp; q_3 \\ -q_1 &amp; -q_2 &amp; -q_3 &amp; q_4 \end{bmatrix}, \qquad \Omega_2(q) = \begin{bmatrix} q_4 &amp; q_3 &amp; -q_2 &amp; q_1 \\ -q_3 &amp; q_4 &amp; q_1 &amp; q_2 \\ q_2 &amp; -q_1 &amp; q_4 &amp; q_3 \\ -q_1 &amp; -q_2 &amp; -q_3 &amp; q_4 \end{bmatrix}.\] <p>The product between any two unit quaternions can then be explicitly computed as: \[ q_a \otimes q_b = \Omega_1(q_a) q_b = \Omega_2(q_b) q_a.\]</p> <p>In fact, the two linear maps $\Omega_1$ and $\Omega_2$ have more interesting properties, and you are asked to prove the following equalities:</p> <ol> <li>For any unit quaternion $q$, both $\Omega_1(q)$ and $\Omega_2(q)$ are <em>orthogonal</em> matrices, <em>i.e.</em>, \[ \Omega_1(q)^T\Omega_1(q) = \Omega_1(q)\Omega_1(q)^T = I_4, \] \[ \Omega_2(q)^T\Omega_2(q) = \Omega_2(q)\Omega_2(q)^T = I_4. \] Intuitively, what is the reason that both $\Omega_1(q)$ and $\Omega_2(q)$ must be orthogonal? <ul> <li class="hint">Hint: what does $q_a \otimes q_b$ still being a unit quaternion imply?</li> </ul> </li> <li> <p>For any unit quaternion $q$, both $\Omega_1(q)$ and $\Omega_2(q)$ convert $q$ to be the unit quaternion that corresponds to the 3D identity rotation, <em>i.e.</em>, \[ \Omega_1(q)^Tq = \Omega_2(q)^Tq = [0,0,0,1]^T. \]</p> </li> <li>For any two vectors $x,y \in \mathbb{R}^4$, show the two linear operators commute, <em>i.e.</em>, \[ \Omega_1(x) \Omega_2(y) = \Omega_2(y) \Omega_1(x), \] \[ \Omega_1(x) \Omega_2(y)^T = \Omega_2(y)^T \Omega_1(x). \]</li> </ol> <h3 id="-optional-deliverable-6---intrinsic-vs-extrinsic-rotations-20-pts"> <a href="#-optional-deliverable-6---intrinsic-vs-extrinsic-rotations-20-pts" class="anchor-heading" aria-labelledby="-optional-deliverable-6---intrinsic-vs-extrinsic-rotations-20-pts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 📨 [Optional] Deliverable 6 - Intrinsic vs Extrinsic rotations (20 pts) </h3> <p>Consider the following sequence of rotations:</p> <ul> <li>$R_0$: 90° around $x$</li> <li>$R_1$: 180° around $y$</li> <li>$R_2$ -30° around $x$</li> </ul> <p><em>A)</em> Extrinsic</p> <p>The sequence of rotations is applied with respect to a fixed frame of reference (the world frame), as follows:</p> <p><img src="http://localhost:4000/ae-740-website/assets/img/lab2/guitar-01.png" alt="Extrinsic rotations" /></p> <p><em>Note</em>: the body axes are unlabeled, but represented in red ($x_b$), green ($y_b$), blue ($z_b$)</p> <p><em>B)</em> Intrinsic</p> <p>The sequence of rotations is applied in <em>reverse order</em> with respect to a frame of reference attached to the object (the body frame), as follows:</p> <p><img src="http://localhost:4000/ae-740-website/assets/img/lab2/guitar-02.png" alt="Intrinsic rotations" /></p> <p><strong>Note that the final orientation of the object is the same in both cases!</strong></p> <p>This property is quite general: it holds regardless of the specific axes and angles of the rotations and for any number of rotations in the sequence.</p> <p>Could you prove this formally?</p> <p><strong>Hint</strong>: Prove that a rotation around a local axis (e.g., around x) is obtained by <em>post-multiplying</em> the given matrix (e.g., by $R_x$), while a rotation around the global axis is obtained by <em>pre-multiplying</em>. Then show the result easily follows from this fact. (It is acceptable that you prove the result for a single axis, e.g., $x$.)</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
